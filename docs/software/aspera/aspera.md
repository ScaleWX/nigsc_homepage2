---
id: aspera
title: Asperaの使い方
---

遺伝研スパコンに対してファイルのアップロード、ダウンロードを行うには、一般的に広く用いられているファイル転送ソフトウェアであるscpやsftpをつかうことができますが、scpなどでは遠距離間で大量のファイルを転送する際に転送速度が遅くなる性質があります。

遠距離の高速通信のために、遺伝研スパコンでは、一般解析区画ではAspera、個人ゲノム解析区画ではHCP toolsというファイル転送ソフトウェアが利用可能となっています。

- asperaを同時に使用しているユーザーの合計で10Gbpsが上限です。(遺伝研全体で外向けの帯域は現在30Gbps）
- 数Gbpsの転送速度を実際に出すには、ローカルマシン側でもサーバやネットワーク機器のチューニングが必要です。
- データ転送に複数のポート(sshのポートの他に33001番ポート等)を用いるので大学・研究機関などのネットワーク設定でそのポートが空いている必要があります。

## クライアントソフトウェアのインストール

Asperaを利用するためにはクライアントソフトウェアをユーザのクライアント計算機にインストールする必要があります。 お使いのクライアント計算機の環境に応じて以下の文書をご参照ください。

- [Windows・Mac OS・Linux](/software/aspera/install_Aspera)


## ファイル転送

### アップロード

ユーザのクライアント計算機でターミナルエミュレータを起動し以下のコマンドを実行します。

```
$ ascp -l 1G -Z 1500 -P 33001 -i ~/.ssh/DDBJ/id_rsa $HOME/test.txt youraccount@ascp.ddbj.nig.ac.jp:
```
アップロード先のパスについて、`scp`と異なりユーザーのホームディレクトリを書いてはならないことに注意が必要です。

上記の例で、各コマンドライン引数の意味は以下のとおりです。

- `-i` 秘密鍵ファイルのパスを指定します。（例では`~/.ssh/DDBJ/id_rsa`）
- `$HOME/test.txt` アップロードしたいファイルのパス。
- `youraccount@ascp.ddbj.nig.ac.jp:` アップロード先のパス
- `ascp.ddbj.nig.ac.jp:` ユーザーのホームディレクトリ(`/home/youraccount`)上にファイルがアップロードされます。
- `ascp.ddbj.nig.ac.jp:somedir/` ユーザーのホームディレクトリ下の指定したディレクトリ(`/home/youraccount/somedir/`)にファイルがアップロードされます。


### ダウンロード

ユーザのクライアント計算機でターミナルエミュレータを起動し以下のコマンドを実行します。

```
$ ascp -l 1G -Z 1500 -P 33001 -i ~/.ssh/DDBJ/id_rsa youraccount@ascp.ddbj.nig.ac.jp:somedir/test.txt $HOME/tmp
```

このコマンドを実行すると、スパコン上の`/home/youraccount/somedir/test.txt`がローカルマシン上の`$HOME/tmp/test.txt`としてダウンロードされます。


### ascpのオプションの意味


基本的なオプションは以下の通りです。

<table>
<tr>
  <th width="150">オプション</th>
  <th>説明</th>
</tr>
<tr>
  <td>-T</td>
  <td>データの暗号化を行いません。転送速度は向上しますがセキュリティは低下します。</td>
</tr>
<tr>
  <td>-l </td>
  <td>データ転送速度の上限を指定します。"値"の部分に上限値を指定しますが、"10M"など、英字による単位指定ができます。本システムでは"10G"が上限で、10Mが本オプションを指定しない場合のデフォルト値です。</td>
</tr>
</table>




その他指定可能な詳細オプションについては、`ascp --help`の出力などを参照してください。

